<div class="blog-article">
    <h1><a href="p.html?p=\算法\不用加减乘除做加法" class="title">不用加减乘除做加法</a></h1>
    <span class="author">xiashuobad</span>
    <span class="time">2020-09-08 10:28</span>
    <span><a href="tags.html?t=算法" class="tag">算法</a></span>
    </div><br/>

## 题目描述
> 写一个函数，求两个整数之和，要求在函数体内不得使用+、-、*、/四则运算符号。

## 分析
1. 这个题目比较好玩，正规做法应该是用位运算做，当然还有一种没啥意义的做法就是把两个
    数放到列表里，然后求和sum([a,b])

2. 知识补充：
    1. 按位与&，按位或|， 按位异或^

       | 操作数1 | 操作数2 | &运算 | \|运算 | ^运算 |
       | :-----: | :-----: | :---: | :----: | :---: |
       |    0    |    0    |   0   |   0    |   0   |
       |    0    |    1    |   0   |   1    |   1   |
       |    1    |    0    |   0   |   1    |   1   |
       |    1    |    1    |   1   |   1    |   0   |

    2. 补码
       计算机中存整数n是用补码存的。

       - 如果n为正数，则原码=反码=补码

       - 如果n为负数，则补码=反码+1

3. 设两数字的二进制形式 a，b ，其求和 s = a + b ，a(i) 代表 a 的二进制第 i 位，则分为以下四种情况：

    | a(i) | b(i) | 当前位 | 进位 |
    | :--: | :--: | :----: | :--: |
    |  0   |  0   |   0    |  0   |
    |  0   |  1   |   1    |  0   |
    |  1   |  0   |   1    |  0   |
    |  1   |  1   |   0    |  1   |

    观察发现，无进位和运算就是按位异或结果，进位就是与运算结果但是需要左移一位，因为进位影响下一位的运算。
    所以s = a + b,其实就是当前位和+进位的结果。
    算法步骤：

    1. 计算a和b的无进位和，和进位

    2. 如果进位不为0，则说明a+b的结果等于无进位和+进位，此时，把无进位和作为a，进位作为b，继续计算

    3. 如果进位等于0， 说明此时a+b的结果就等于无进位和，返回无进位和即可。

       例如：a=5,b=1时

       操作数		a:		1		0		1

       操作数		b:		0		0		1

       第一次	当前位	1		0		0

       ​				  进位	  0		1		0

       第二次	当前位	 1		1		0

       ​				  进位	   0		0		0

       进位为0了，结果则为当前位的值，即 a+b=6

4. 当结果为负数时，需要每次给当前位 “与”上一个 oxffffffff，使得负数变为无符号整数（最高32位，最高位为1）的形式（对正数没有影响）。最后结果判断最高位第32位是否为0，若为0则表示正数，则直接输出，否则为负数，结果-0x100000000转换成有符号的负数。

## python实现

```python
class Solution:
    def Add(self, num1, num2):
        while num2:
            num1,num2 = (num1^num2)&0xffffffff,(num1&num2)<<1
        return num1 if num1>>31 == 0 else num1 - 0x100000000
```

